<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout(~{::content})}">
<head>
  <title>장바구니</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .cart-item {
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 15px;
      margin-bottom: 15px;
    }
    .cart-item img {
      max-width: 100px;
    }
    .cart-summary {
      border: 1px solid #ddd;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 5px;
    }
    .btn-primary {
      background-color: #007bff;
      border-color: #007bff;
    }
    .btn-primary:hover {
      background-color: #0056b3;
      border-color: #0056b3;
    }
    .btn-quantity {
      width: 30px;
      height: 30px;
      padding: 0;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      font-size: 20px;
    }
    .remove-item {
      font-size: 12px;
      color: #ff0000;
    }
  </style>
</head>
<body>
<div th:fragment="content">

  <!-- Start Breadcrumbs Component -->
  <div th:replace="~{fragments/breadcrumbs :: breadcrumbs}"></div>
  <!-- End Breadcrumbs Component -->

  <!-- Start Cart Details -->
  <section class="cart-details section">
    <div class="container">
      <h2 class="my-4">장바구니</h2>
      <form id="checkout-form" action="/orders/checkout" method="get">
        <div class="row">
          <div class="col-lg-8 col-md-12 col-12">
            <h5>상품 목록</h5>
            <div th:each="cart, iter : ${carts}">
              <div class="cart-item row align-items-center">
                <div class="col-lg-2 col-md-3 col-12">
                  <div class="cart-image">
                    <img th:src="${cart.bookImage}" alt="Book Image" class="img-fluid">
                  </div>
                </div>
                <div class="col-lg-4 col-md-3 col-12">
                  <h5 th:text="${cart.bookName}">Book Name</h5>
                </div>
                <div class="col-lg-2 col-md-3 col-12">
                  <div class="cart-price">
                    <p class="mb-0" th:text="${cart.bookPrice} + ' 원'">Price</p>
                  </div>
                </div>
                <div class="col-lg-2 col-md-3 col-12">
                  <div class="cart-quantity d-flex align-items-center">
                    <button type="button" class="btn btn-secondary btn-quantity" onclick="decrementQuantity(this)">-</button>
                    <label>
                      <input type="number" name="quantities" th:value="${cart.cartBookQuantity}" min="1" max="10" class="form-control mx-2 text-center" style="width: 60px;">
                    </label>
                    <button type="button" class="btn btn-secondary btn-quantity" onclick="incrementQuantity(this)">+</button>
                  </div>
                </div>
                <div class="col-lg-2 col-md-3 col-12 text-right">
                  <a href="#" class="remove-item">삭제</a>
                </div>
                <input type="hidden" name="bookIdList" th:value="${cart.bookId}">
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-12 col-12">
            <div class="cart-summary">
              <h3 class="mb-3">주문 예상 금액</h3>
              <p>총 상품 가격: <span th:text="${totalPrice} + ' 원'">0 원</span></p>
              <p>총 할인: <span>0 원</span></p>
              <p>총 배송비: <span>0 원</span></p>
              <h4 class="mt-3">합계: <span th:text="${totalPrice} + ' 원'">0 원</span></h4>
              <button type="submit" class="btn btn-primary btn-block mt-3">구매하기</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </section>
  <!-- End Cart Details -->

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script>
    function decrementQuantity(button) {
      var input = button.nextElementSibling;
      if (input.value > 1) {
        input.value--;
      }
    }

    function incrementQuantity(button) {
      var input = button.previousElementSibling;
      if (input.value < 10) {
        input.value++;
      }
    }
  </script>
</div>
</body>
</html>
