<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout(~{::content})}">
<body>
<div th:fragment="content">

    <!-- Start Breadcrumbs Component -->
    <div th:replace="~{fragments/breadcrumbs :: breadcrumbs}"></div>
    <!-- End Breadcrumbs Component -->

    <!-- Start Account Register Area -->
    <div class="account-login section">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 offset-lg-3 col-md-10 offset-md-1 col-12">
                    <div class="register-form">
                        <div class="title">
                            <h3>No Account? Register</h3>
                            <p>Registration takes less than a minute but gives you full control over your orders.</p>
                        </div>
                        <form class="row" method="post">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="reg-fn">First Name</label>
                                    <input class="form-control" type="text" id="reg-fn" required>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="reg-ln">Last Name</label>
                                    <input class="form-control" type="text" id="reg-ln" required>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="reg-email">E-mail Address</label>
                                    <input class="form-control" type="email" id="reg-email" required>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="reg-phone">Phone Number</label>
                                    <input class="form-control" type="text" id="reg-phone" required>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="reg-pass">Password</label>
                                    <input class="form-control" type="password" id="reg-pass" required>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="reg-pass-confirm">Confirm Password</label>
                                    <input class="form-control" type="password" id="reg-pass-confirm" required>
                                </div>
                            </div>
                            <div id="pwConfirm">

                            </div>
                            <div class="button">
                                <button class="btn" type="submit" id="register-btn">Register</button>
                            </div>
                            <p class="outer-link">Already have an account? <a href="#">Login Now</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Account Register Area -->
    <!-- 모달 -->
    <div class="modal fade" id="registrationSuccessModal" tabindex="-1" aria-labelledby="registrationSuccessModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="registrationSuccessModalLabel">회원가입 성공</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>회원가입을 축하드립니다! <br>
                        Welcome 쿠폰이 발급되었어요. 쿠폰함에서 확인할 수 있어요!</p>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-primary" data-bs-dismiss="modal">쿠폰함으로 이동</a>
                    <a href="#" class="btn btn-secondary" data-bs-dismiss="modal">메인으로 이동</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 회원가입 버튼 눌럿을 때 Welcome 쿠폰 관련 모달 뜨게 하는 JS
        // 현재는 Register 버튼 눌렀을 떄 무조건 모달 뜨게 구현해 놓음
        const registerButton = document.querySelector('.register-form .button .btn');
        registerButton.addEventListener('click', function(event) {
            event.preventDefault(); // 기본 동작 방지
            const registrationSuccessModal = new bootstrap.Modal(document.getElementById('registrationSuccessModal'));
            registrationSuccessModal.show();
        });
    </script>

    <script>
    // 비밀번호 확인하는 JS
    const newPasswordInput = document.getElementById('reg-pass');
    const confirmPasswordInput = document.getElementById('reg-pass-confirm');
    const pwConfirmElement = document.getElementById('pwConfirm');
    const setPasswordBtn = document.getElementById('register-btn');

    function pwCheck() {
        if (newPasswordInput.value === confirmPasswordInput.value) {
            pwConfirmElement.textContent = '비밀번호 일치';
            pwConfirmElement.style.color = 'green';
        } else {
            pwConfirmElement.textContent = '비밀번호 불일치';
            pwConfirmElement.style.color = 'red';
        }

        setPasswordBtn.disabled = (newPasswordInput.value !== confirmPasswordInput.value);
    }

    newPasswordInput.addEventListener('input', pwCheck);
    confirmPasswordInput.addEventListener('input', pwCheck);
</script>
</div>
</body>
</html>